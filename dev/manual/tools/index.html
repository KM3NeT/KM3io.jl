<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Tools · KM3io.jl</title><meta name="title" content="Tools · KM3io.jl"/><meta property="og:title" content="Tools · KM3io.jl"/><meta property="twitter:title" content="Tools · KM3io.jl"/><meta name="description" content="Documentation for KM3io.jl."/><meta property="og:description" content="Documentation for KM3io.jl."/><meta property="twitter:description" content="Documentation for KM3io.jl."/><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../search_index.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script><link href="../../assets/custom.css" rel="stylesheet" type="text/css"/></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../../"><img src="../../assets/logo.svg" alt="KM3io.jl logo"/></a><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../../">Home</a></li><li><span class="tocitem">Manual</span><ul><li><a class="tocitem" href="../rootfiles/">ROOT Files</a></li><li><a class="tocitem" href="../multi-threading/">Multi-Threading</a></li><li><a class="tocitem" href="../detector/">Detector and its Components</a></li><li><a class="tocitem" href="../calibration/">Calibration</a></li><li><a class="tocitem" href="../coordinates/">Coordinates</a></li><li><a class="tocitem" href="../auxfiles/">Auxiliary Files</a></li><li class="is-active"><a class="tocitem" href>Tools</a><ul class="internal"><li><a class="tocitem" href="#Best-track/shower"><span>Best track/shower</span></a></li><li><a class="tocitem" href="#Trigger-masks/flags"><span>Trigger masks/flags</span></a></li></ul></li></ul></li><li><span class="tocitem">Examples</span><ul><li><a class="tocitem" href="../../examples/online_data/">Online data</a></li><li><a class="tocitem" href="../../examples/offline_data/">Offline data</a></li><li><a class="tocitem" href="../../examples/cherenkov_times/">Cherenkov times</a></li><li><a class="tocitem" href="../../examples/orientations/">Orientations</a></li><li><a class="tocitem" href="../../examples/controlhost/">Accessing Live Data</a></li><li><a class="tocitem" href="../../examples/hdf5/">HDF5</a></li></ul></li><li><a class="tocitem" href="../../api/">API</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Manual</a></li><li class="is-active"><a href>Tools</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Tools</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://git.km3net.de/common/KM3io.jl" title="View the repository"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">Repository</span></a><a class="docs-navbar-link" href="https://git.km3net.de/common/KM3io.jl/blob/main/docs/src/manual/tools.md#L" title="Edit source"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Tools"><a class="docs-heading-anchor" href="#Tools">Tools</a><a id="Tools-1"></a><a class="docs-heading-anchor-permalink" href="#Tools" title="Permalink"></a></h1><p>There are many commonly used routines to find for example the best reconstructed muon track or find out if a given hit was flagged by a specific trigger algorithm. This section will show some helper functions available in <code>KM3io.jl</code>.</p><h2 id="Best-track/shower"><a class="docs-heading-anchor" href="#Best-track/shower">Best track/shower</a><a id="Best-track/shower-1"></a><a class="docs-heading-anchor-permalink" href="#Best-track/shower" title="Permalink"></a></h2><p>In KM3NeT, the best reconstructed track or shower of a given set of tracks respectively showers is the one with the highest value of the likelihood parameter (<code>lik</code>) and the longest reconstruction history (<code>rec_stages</code>) which is a record of reconstruction stages performed during the whole fitting procedure.</p><p>The offline dataformat, which is used to store reconstruction information, has only a single <code>Vector{Trk}</code> per event which is a flat list of reconstructed tracks and showers. This vector can be a mix of different reconstruction algorithms (JGandalf, aashower, FibonacciFit, ...) and different stages of each, like prefit candidates, intermediate fits and final results. Therefore it is necessary to take the reconstruction type (<code>rec_type</code>) and also the values of the reconstruction stages (<code>rec_stages</code>) into account. Each reconstruction algorithm and each of their reconstruction stages have their own unique identifiers, which are stored in these two fields.</p><div class="admonition is-info" id="Note-bd411c2b457a01b5"><header class="admonition-header">Note<a class="admonition-anchor" href="#Note-bd411c2b457a01b5" title="Permalink"></a></header><div class="admonition-body"><p>Both tracks and showers are stored as <code>Trk</code>. This comes from the fact that the original KM3NeT dataformat defintion for offline files uses the same C++ class (named <code>Trk</code>).</p></div></div><p>The helper functions in <code>KM3io.jl</code> to pick the best track/shower always start with the prefix <code>best</code>, followed by the common name of the reconstruction routine, like <code>jppmuon</code>, or <code>aashower</code>. For example <a href="../../api/#KM3io.bestjppmuon"><code>bestjppmuon()</code></a>, <a href="../../api/#KM3io.bestjppshower"><code>bestjppshower()</code></a> or <a href="../../api/#KM3io.besttrack"><code>besttrack()</code></a>, latter being a more general function which gives the possibility to fine tune the selection criteria.</p><p>The API documentation of all related functions can be found in the <a href="../../api/#Reconstruction">Reconstruction</a> section.</p><p>The input can be an event (<code>Evt</code>) or a vector of reconstructed tracks (<code>Vector{Trk}</code>). If no track/shower could be found, <code>missing</code> is returned instead.</p><p>Below are some examples of how to use these functions.</p><pre><code class="language-julia hljs">using KM3io, KM3NeTTestData

f = ROOTFile(datapath(&quot;offline&quot;, &quot;km3net_offline.root&quot;))</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">ROOTFile{OfflineTree (10 events)}</code></pre><pre><code class="language-julia hljs">event = f.offline[1]</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">MC/Reco Event (Evt) (176 hits, 0 MC hits, 56 reco tracks, 0 MC tracks)
  ID: 1
  Detector ID: 44
  MC ID: 0
  MC event time: UTCTime(0, 0)
  Primary MC particle: missing
</code></pre><pre><code class="language-julia hljs">bestjppmuon(event)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">Trk (Reconstructed track)
  id: 1
  pos: Position{Float64}(445.835, 615.109, 125.145)
  dir: Direction{Float64}(0.037, -0.487, -0.873)
  t: 7.031144646401498e7
  E: 99.10458562488608
  len: 0.0
  lik: 294.6407542676734
  rec_type: 4000
  rec_stages: Int32[1, 3, 5, 4]
  fitinf: FitInformation([0.004957442219414389, 0.003417848024252858, -294.6407542676734, 142.0, 99.10458562488608, 1.7976931348623157e308, 4.2409761837248484e-12, 10.0, 24.88469697331908, 55.88169412579765, 98.89582506402911, 0.0, 0.0, 344.9767431592819, -333.87773581129136, 1471.0, 101.0])</code></pre><pre><code class="language-julia hljs">bestjppshower(event)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">missing</code></pre><pre><code class="language-julia hljs">bestaashower(event)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">missing</code></pre><pre><code class="language-julia hljs">bestjppshower(event.trks)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">missing</code></pre><pre><code class="language-julia hljs">bestaashower(event.trks)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">missing</code></pre><p>Additonally, there are helper functions which can be used to check if a specific reconstruction stage or result is present in an event or a given set of tracks/showers.</p><pre><code class="language-julia hljs">track = event.trks |&gt; first</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">Trk (Reconstructed track)
  id: 1
  pos: Position{Float64}(445.835, 615.109, 125.145)
  dir: Direction{Float64}(0.037, -0.487, -0.873)
  t: 7.031144646401498e7
  E: 99.10458562488608
  len: 0.0
  lik: 294.6407542676734
  rec_type: 4000
  rec_stages: Int32[1, 3, 5, 4]
  fitinf: FitInformation([0.004957442219414389, 0.003417848024252858, -294.6407542676734, 142.0, 99.10458562488608, 1.7976931348623157e308, 4.2409761837248484e-12, 10.0, 24.88469697331908, 55.88169412579765, 98.89582506402911, 0.0, 0.0, 344.9767431592819, -333.87773581129136, 1471.0, 101.0])</code></pre><pre><code class="language-julia hljs">hasjppmuonprefit(track)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">true</code></pre><pre><code class="language-julia hljs">hasjppmuonsimplex(track)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">false</code></pre><pre><code class="language-julia hljs">hasjppmuongandalf(track)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">true</code></pre><pre><code class="language-julia hljs">hasjppmuonfit(track)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">true</code></pre><pre><code class="language-julia hljs">hasaashowerfit(track)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">false</code></pre><pre><code class="language-julia hljs">hasreconstructedjppmuon(event)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">true</code></pre><pre><code class="language-julia hljs">hasreconstructedjppshower(event)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">false</code></pre><pre><code class="language-julia hljs">hasreconstructedaashower(event)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">false</code></pre><div class="admonition is-info" id="Note-780a36cb96789e26"><header class="admonition-header">Note<a class="admonition-anchor" href="#Note-780a36cb96789e26" title="Permalink"></a></header><div class="admonition-body"><p>To check multiple events in one go, use the <a href="https://docs.julialang.org/en/v1/manual/arrays/#Broadcasting">Broadcasting</a> feature of the Julia language by putting a dot (<code>.</code>) at the end of the function name, e.g. <code>bestjppmuon.(f.offline)</code> which will find the best Jpp muon reconstruction result for each event in the offline tree.</p></div></div><pre><code class="language-julia hljs">bestjppmuon.(f.offline[2:5])</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">4-element Vector{Trk}:
 Trk(1, Position{Float64}(465.057, 532.682, 80.732), Direction{Float64}(-0.175, 0.521, -0.835), 8.106927901568094e7, 99.10458562488608, 0.0, 96.75133289411137, 4000, Int32[1, 3, 5, 4], FitInformation([0.01837814570268761, 0.009401304503949024, -96.75133289411137, 72.0, 99.10458562488608, 1.7976931348623157e308, 259.2943164149993, 59.0, 16.87128649083537, 24.773873409176925, 59.43893182922881, 0.0, 0.0, 344.9767431592819, -178.51901912484058, 790.0, 54.0]))
 Trk(1, Position{Float64}(456.976, 592.751, 193.825), Direction{Float64}(-0.082, -0.122, -0.989), 2.128187723727164e7, 99.10458562488608, 0.0, 560.2775306614813, 4000, Int32[1, 3, 5, 4], FitInformation([0.0022862363916181096, 0.0015619992272287897, -560.2775306614813, 261.0, 99.10458562488608, 1.7976931348623157e308, 5.84464995424756, 52.0, 91.37269495454369, 148.1224810941145, 165.70400027827318, 0.0, 0.0, 344.9767431592819, -654.1882814711497, 2526.0, 198.0]))
 Trk(1, Position{Float64}(439.747, 590.475, 203.835), Direction{Float64}(-0.102, -0.230, -0.968), 1.6513108700491736e7, 37.8551524925863, 0.0, 278.2872951665753, 4000, Int32[1, 3, 5, 4], FitInformation([0.006041091149104179, 0.0035514113196960105, -278.2872951665753, 118.0, 37.8551524925863, 265.5559310077148, 52.601849588228035, 53.0, 40.65396902507262, 46.54735947527185, 97.27912085164719, 0.0, 0.0, 141.61500301253315, -Inf, 2713.0, 88.0]))
 Trk(1, Position{Float64}(439.743, 546.334, 58.645), Direction{Float64}(0.187, 0.540, -0.821), 4.717893801990337e7, 99.10458562488608, 0.0, 99.59098153341449, 4000, Int32[1, 3, 5, 4], FitInformation([0.024623519864386552, 0.014331655995648987, -99.59098153341449, 47.0, 99.10458562488608, 1.7976931348623157e308, 64.29114949672314, 51.0, 22.75185164189341, 22.75185164189341, 33.78774068100958, 0.0, 0.0, 344.9767431592819, -115.80151219196675, 480.0, 35.0]))</code></pre><p>Let&#39;s close our file <code>;)</code></p><pre><code class="language-julia hljs">close(f)</code></pre><h2 id="Trigger-masks/flags"><a class="docs-heading-anchor" href="#Trigger-masks/flags">Trigger masks/flags</a><a id="Trigger-masks/flags-1"></a><a class="docs-heading-anchor-permalink" href="#Trigger-masks/flags" title="Permalink"></a></h2><p>KM3NeT uses a 64bit integer type to store information about which triggers have fired for a given event or hit. The index of the bit which indicates if a specific trigger has fired is defined in the <a href="https://git.km3net.de/common/km3net-dataformat">KM3NeT Dataformat</a> specification which is used in <code>KM3io.jl</code>.</p><p>Functions to check if a trigger has fired are for example</p><ul><li><a href="../../api/#KM3io.is3dmuon"><code>is3dmuon()</code></a></li><li><a href="../../api/#KM3io.is3dshower"><code>is3dshower()</code></a></li><li><a href="../../api/#KM3io.ismxshower"><code>ismxshower()</code></a></li><li><a href="../../api/#KM3io.isnb"><code>isnb()</code></a></li></ul><p>which all accept either an event is input or something which has a <code>.trigger_mask</code> field, like a triggered hit.</p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../auxfiles/">« Auxiliary Files</a><a class="docs-footer-nextpage" href="../../examples/online_data/">Online data »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.14.1 on <span class="colophon-date" title="Wednesday 17 September 2025 14:27">Wednesday 17 September 2025</span>. Using Julia version 1.11.3.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
