<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Offline data · KM3io.jl</title><meta name="title" content="Offline data · KM3io.jl"/><meta property="og:title" content="Offline data · KM3io.jl"/><meta property="twitter:title" content="Offline data · KM3io.jl"/><meta name="description" content="Documentation for KM3io.jl."/><meta property="og:description" content="Documentation for KM3io.jl."/><meta property="twitter:description" content="Documentation for KM3io.jl."/><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../search_index.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script><link href="../../assets/custom.css" rel="stylesheet" type="text/css"/></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../../"><img src="../../assets/logo.svg" alt="KM3io.jl logo"/></a><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../../">Home</a></li><li><span class="tocitem">Manual</span><ul><li><a class="tocitem" href="../../manual/rootfiles/">ROOT Files</a></li><li><a class="tocitem" href="../../manual/detector/">Detector and its Components</a></li><li><a class="tocitem" href="../../manual/calibration/">Calibration</a></li></ul></li><li><span class="tocitem">Examples</span><ul><li class="is-active"><a class="tocitem" href>Offline data</a><ul class="internal"><li><a class="tocitem" href="#Events"><span>Events</span></a></li></ul></li><li><a class="tocitem" href="../cherenkov_times/">Cherenkov times</a></li><li><a class="tocitem" href="../controlhost/">Accessing Live Data</a></li><li><a class="tocitem" href="../hdf5/">HDF5</a></li></ul></li><li><a class="tocitem" href="../../api/">API</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Examples</a></li><li class="is-active"><a href>Offline data</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Offline data</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://git.km3net.de/common/KM3io.jl" title="View the repository"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">Repository</span></a><a class="docs-navbar-link" href="https://git.km3net.de/common/KM3io.jl/blob/main/docs/src/examples/offline_data.md#L" title="Edit source"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Offline-data"><a class="docs-heading-anchor" href="#Offline-data">Offline data</a><a id="Offline-data-1"></a><a class="docs-heading-anchor-permalink" href="#Offline-data" title="Permalink"></a></h1><p>Let&#39;s use the <code>KM3NeTTestData</code> Julia package which contains all kinds of KM3NeT related sample files. The <code>datapath()</code> function can be used to get a path to such a file. In the following, we will discover the <code>numucc.root</code> file which contains 10 muon neutrino charged current interaction events.</p><pre><code class="language-julia hljs">using KM3io, KM3NeTTestData

f = ROOTFile(datapath(&quot;offline&quot;, &quot;numucc.root&quot;))</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">ROOTFile{OnlineTree (0 events, 0 summaryslices), OfflineTree (10 events)}</code></pre><p>The <code>ROOTFile</code> is the container object which gives access to both the online and offline tree. In this case, the online tree is empty</p><pre><code class="language-julia hljs">f.online</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">OnlineTree (0 events, 0 summaryslices)</code></pre><p>and the offline tree holds our 10 MC events:</p><pre><code class="language-julia hljs">f.offline</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">OfflineTree (10 events)</code></pre><h2 id="Events"><a class="docs-heading-anchor" href="#Events">Events</a><a id="Events-1"></a><a class="docs-heading-anchor-permalink" href="#Events" title="Permalink"></a></h2><p>To access a single event, you can use the usual indexing syntax:</p><pre><code class="language-julia hljs">some_event = f.offline[5]</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">Evt (4105 hits, 78 MC hits, 0 tracks, 10 MC tracks)</code></pre><p>or ranges of events:</p><pre><code class="language-julia hljs">events = f.offline[6:9]</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">4-element Vector{Evt}:
 Evt (4301 hits, 50 MC hits, 60 tracks, 13 MC tracks)
 Evt (3949 hits, 58 MC hits, 59 tracks, 11 MC tracks)
 Evt (4180 hits, 49 MC hits, 66 tracks, 10 MC tracks)
 Evt (4210 hits, 35 MC hits, 38 tracks, 13 MC tracks)</code></pre><h3 id="Hits"><a class="docs-heading-anchor" href="#Hits">Hits</a><a id="Hits-1"></a><a class="docs-heading-anchor-permalink" href="#Hits" title="Permalink"></a></h3><p>Each event consists of a vector of hits, MC hits, tracks and MC tracks. Depending on the file, they may be empty. They are accessible via the fields <code>.hit</code>, <code>.mc_hits</code>, <code>.trks</code> and <code>.mc_trks</code>.</p><p>Let&#39;s grab an event:</p><pre><code class="language-julia hljs">evt = f.offline[3]</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">Evt (3680 hits, 28 MC hits, 38 tracks, 12 MC tracks)</code></pre><p>and have a look at its contents:</p><pre><code class="language-julia hljs">evt.hits</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">3680-element Vector{CalibratedHit}:
 CalibratedHit(101, 0x00000014, 0x00000000, 0x0000001c, 0x0000000000000000, 4.1278339e7, [0.0, 0.0, 0.0], [0.0, 0.0, 0.0])
 CalibratedHit(101, 0x00000013, 0x00000000, 0x0000001a, 0x0000000000000000, 4.1283561e7, [0.0, 0.0, 0.0], [0.0, 0.0, 0.0])
 CalibratedHit(102, 0x00000012, 0x00000000, 0x00000019, 0x0000000000000000, 4.1282618e7, [0.0, 0.0, 0.0], [0.0, 0.0, 0.0])
 CalibratedHit(103, 0x00000002, 0x00000000, 0x0000001b, 0x0000000000000000, 4.1278687e7, [0.0, 0.0, 0.0], [0.0, 0.0, 0.0])
 CalibratedHit(103, 0x00000012, 0x00000000, 0x00000018, 0x0000000000000000, 4.1285088e7, [0.0, 0.0, 0.0], [0.0, 0.0, 0.0])
 CalibratedHit(104, 0x0000000c, 0x00000000, 0x00000015, 0x0000000000000000, 4.1280852e7, [0.0, 0.0, 0.0], [0.0, 0.0, 0.0])
 CalibratedHit(105, 0x00000013, 0x00000000, 0x0000001a, 0x0000000000000000, 4.1279503e7, [0.0, 0.0, 0.0], [0.0, 0.0, 0.0])
 CalibratedHit(105, 0x00000003, 0x00000000, 0x0000001b, 0x0000000000000000, 4.12895e7, [0.0, 0.0, 0.0], [0.0, 0.0, 0.0])
 CalibratedHit(106, 0x00000005, 0x00000000, 0x0000001c, 0x0000000000000000, 4.1280505e7, [0.0, 0.0, 0.0], [0.0, 0.0, 0.0])
 CalibratedHit(106, 0x0000001a, 0x00000000, 0x00000015, 0x0000000000000000, 4.1285236e7, [0.0, 0.0, 0.0], [0.0, 0.0, 0.0])
 ⋮
 CalibratedHit(11513, 0x00000016, 0x00000000, 0x0000000a, 0x0000000000000000, 4.1283562e7, [0.0, 0.0, 0.0], [0.0, 0.0, 0.0])
 CalibratedHit(11514, 0x00000003, 0x00000000, 0x00000012, 0x0000000000000000, 4.1278657e7, [0.0, 0.0, 0.0], [0.0, 0.0, 0.0])
 CalibratedHit(11514, 0x00000012, 0x00000000, 0x00000019, 0x0000000000000000, 4.1286932e7, [0.0, 0.0, 0.0], [0.0, 0.0, 0.0])
 CalibratedHit(11515, 0x00000003, 0x00000000, 0x00000013, 0x0000000000000000, 4.1278167e7, [0.0, 0.0, 0.0], [0.0, 0.0, 0.0])
 CalibratedHit(11516, 0x00000015, 0x00000000, 0x0000001b, 0x0000000000000000, 4.1288682e7, [0.0, 0.0, 0.0], [0.0, 0.0, 0.0])
 CalibratedHit(11517, 0x00000001, 0x00000000, 0x00000015, 0x0000000000000000, 4.1282884e7, [0.0, 0.0, 0.0], [0.0, 0.0, 0.0])
 CalibratedHit(11518, 0x00000013, 0x00000000, 0x00000015, 0x0000000000000000, 4.1281458e7, [0.0, 0.0, 0.0], [0.0, 0.0, 0.0])
 CalibratedHit(11518, 0x00000002, 0x00000000, 0x0000001d, 0x0000000000000000, 4.1281468e7, [0.0, 0.0, 0.0], [0.0, 0.0, 0.0])
 CalibratedHit(11518, 0x00000013, 0x00000000, 0x00000019, 0x0000000000000000, 4.1284348e7, [0.0, 0.0, 0.0], [0.0, 0.0, 0.0])</code></pre><p>Let&#39;s close this file properly:</p><pre><code class="language-julia hljs">close(f)</code></pre><h3 id="Usr-data"><a class="docs-heading-anchor" href="#Usr-data">Usr data</a><a id="Usr-data-1"></a><a class="docs-heading-anchor-permalink" href="#Usr-data" title="Permalink"></a></h3><p>You can also access &quot;usr&quot;-data, which is a dynamic placeholder (<code>Dict{String, Float64}</code>) to store arbitrary data. Some software store values here which are only losely defined. Ideally, if these fields are used regulary by a software, a proper definition in the KM3NeT dataformat should be created and added to the according <code>Struct</code> as a field.</p><p>Here is an example how to access the &quot;usr&quot;-data of a single event:</p><pre><code class="language-julia hljs">f = ROOTFile(datapath(&quot;offline&quot;, &quot;usr-sample.root&quot;))

f.offline[1].usr</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">Dict{String, Float64} with 17 entries:
  &quot;NTrigDOMs&quot;          =&gt; 7.0
  &quot;NTrigLines&quot;         =&gt; 6.0
  &quot;ChargeBelow&quot;        =&gt; 649.0
  &quot;ClassficationScore&quot; =&gt; 0.168634
  &quot;NTrigHits&quot;          =&gt; 30.0
  &quot;NGeometryVetoHits&quot;  =&gt; 0.0
  &quot;ChargeRatio&quot;        =&gt; 0.213333
  &quot;ToT&quot;                =&gt; 825.0
  &quot;DeltaPosZ&quot;          =&gt; 37.5197
  &quot;RecoQuality&quot;        =&gt; 85.4596
  &quot;LastPartPosZ&quot;       =&gt; 97.7753
  &quot;NSnapHits&quot;          =&gt; 51.0
  &quot;NSpeedVetoHits&quot;     =&gt; 0.0
  &quot;RecoNDF&quot;            =&gt; 37.0
  &quot;FirstPartPosZ&quot;      =&gt; 135.295
  &quot;CoC&quot;                =&gt; 118.63
  &quot;ChargeAbove&quot;        =&gt; 176.0</code></pre><pre><code class="language-julia hljs">close(f)</code></pre></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../../manual/calibration/">« Calibration</a><a class="docs-footer-nextpage" href="../cherenkov_times/">Cherenkov times »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="auto">Automatic (OS)</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.1.1 on <span class="colophon-date" title="Friday 13 October 2023 08:36">Friday 13 October 2023</span>. Using Julia version 1.8.5.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
